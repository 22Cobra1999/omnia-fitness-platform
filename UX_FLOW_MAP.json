{
  "metadata": {
    "title": "OMNIA - Mapa de Flujo UX Completo",
    "version": "1.0.0",
    "date": "2025-01-09",
    "description": "Red completa de navegación, tabs, pantallas y acciones de la aplicación OMNIA",
    "roles": ["Cliente", "Coach"],
    "totalScreens": 15,
    "totalTabs": 10
  },
  "roles": {
    "cliente": {
      "name": "Cliente",
      "color": "#3B82F6",
      "description": "Usuario que busca coaches, actividades y gestiona su progreso"
    },
    "coach": {
      "name": "Coach",
      "color": "#FF7939",
      "description": "Profesional que gestiona clientes, productos y calendario"
    }
  },
  "mainTabs": {
    "cliente": [
      {
        "id": "search",
        "name": "Search",
        "icon": "Search",
        "screen": "SearchScreen",
        "color": "#3B82F6",
        "order": 1,
        "requiresAuth": false
      },
      {
        "id": "activity",
        "name": "Activity",
        "icon": "Activity",
        "screen": "ActivityScreen",
        "color": "#3B82F6",
        "order": 2,
        "requiresAuth": true
      },
      {
        "id": "community",
        "name": "Community",
        "icon": "Flame",
        "screen": "CommunityScreen",
        "color": "#FF7939",
        "order": 3,
        "requiresAuth": false,
        "isCenter": true
      },
      {
        "id": "calendar",
        "name": "Calendar",
        "icon": "CalendarDays",
        "screen": "CalendarScreen",
        "color": "#3B82F6",
        "order": 4,
        "requiresAuth": true
      },
      {
        "id": "profile",
        "name": "Profile",
        "icon": "User",
        "screen": "ProfileScreen",
        "color": "#3B82F6",
        "order": 5,
        "requiresAuth": true
      }
    ],
    "coach": [
      {
        "id": "clients",
        "name": "Clients",
        "icon": "Users",
        "screen": "ClientsScreen",
        "color": "#FF7939",
        "order": 1,
        "requiresAuth": true
      },
      {
        "id": "products-management",
        "name": "Products",
        "icon": "ShoppingBag",
        "screen": "ProductsManagementScreen",
        "color": "#FF7939",
        "order": 2,
        "requiresAuth": true
      },
      {
        "id": "community",
        "name": "Community",
        "icon": "Flame",
        "screen": "CommunityScreen",
        "color": "#FF7939",
        "order": 3,
        "requiresAuth": false,
        "isCenter": true
      },
      {
        "id": "calendar",
        "name": "Calendar",
        "icon": "CalendarDays",
        "screen": "CalendarScreen",
        "color": "#FF7939",
        "order": 4,
        "requiresAuth": true
      },
      {
        "id": "profile",
        "name": "Profile",
        "icon": "User",
        "screen": "ProfileScreen",
        "color": "#FF7939",
        "order": 5,
        "requiresAuth": true
      }
    ]
  },
  "screens": {
    "SearchScreen": {
      "id": "search",
      "name": "Búsqueda",
      "role": "cliente",
      "description": "Búsqueda de coaches y actividades",
      "subTabs": [
        {
          "id": "coaches",
          "name": "Coaches",
          "description": "Lista de coaches disponibles"
        },
        {
          "id": "activities",
          "name": "Activities",
          "description": "Lista de actividades/productos disponibles"
        }
      ],
      "actions": [
        {
          "id": "click_coach",
          "name": "Click en Coach",
          "target": "CoachProfileModal",
          "description": "Abre modal con perfil del coach"
        },
        {
          "id": "click_activity_from_search",
          "name": "Click en Actividad",
          "target": "ClientProductModal",
          "description": "Abre modal con detalles del producto/actividad"
        },
        {
          "id": "search_filter",
          "name": "Filtrar búsqueda",
          "target": "SearchScreen",
          "description": "Aplica filtros de búsqueda"
        }
      ],
      "apis": [
        "GET /api/coaches",
        "GET /api/activities/search",
        "GET /api/search-coaches"
      ]
    },
    "ActivityScreen": {
      "id": "activity",
      "name": "Mis Actividades",
      "role": "cliente",
      "description": "Vista de actividades inscritas del cliente",
      "sections": [
        {
          "id": "active_programs",
          "name": "Programas Activos",
          "description": "Lista de programas/talleres inscritos"
        },
        {
          "id": "completed_programs",
          "name": "Programas Completados",
          "description": "Historial de programas finalizados"
        }
      ],
      "actions": [
        {
          "id": "click_activity",
          "name": "Click en Actividad",
          "target": "TodayScreen",
          "description": "Abre vista de día de la actividad"
        },
        {
          "id": "view_progress",
          "name": "Ver Progreso",
          "target": "ActivityScreen",
          "description": "Muestra progreso de la actividad"
        }
      ],
      "apis": [
        "GET /api/get-product-planning"
      ]
    },
    "CommunityScreen": {
      "id": "community",
      "name": "Community",
      "role": "both",
      "description": "Feed social de la comunidad OMNIA",
      "subTabs": [
        {
          "id": "foryou",
          "name": "For You",
          "description": "Feed personalizado"
        },
        {
          "id": "following",
          "name": "Following",
          "description": "Coaches y usuarios que sigues"
        }
      ],
      "actions": [
        {
          "id": "like_post",
          "name": "Like en Post",
          "target": "CommunityScreen",
          "description": "Da like a una publicación"
        },
        {
          "id": "save_post",
          "name": "Guardar Post",
          "target": "CommunityScreen",
          "description": "Guarda publicación para después"
        },
        {
          "id": "comment_post",
          "name": "Comentar Post",
          "target": "CommunityScreen",
          "description": "Comenta en una publicación"
        }
      ],
      "apis": []
    },
    "CalendarScreen": {
      "id": "calendar",
      "name": "Calendario",
      "role": "both",
      "description": "Vista de calendario con actividades programadas",
      "variants": {
        "cliente": {
          "description": "Muestra actividades inscritas del cliente",
          "actions": [
            {
              "id": "click_activity_calendar",
              "name": "Click en Actividad",
              "target": "ActivityScreen",
              "description": "Navega a la actividad del día"
            },
            {
              "id": "change_date",
              "name": "Cambiar Fecha",
              "target": "CalendarScreen",
              "description": "Cambia la fecha seleccionada"
            }
          ]
        },
        "coach": {
          "description": "Muestra calendario mensual del coach con todas las actividades",
          "actions": [
            {
              "id": "view_day_activities",
              "name": "Ver Actividades del Día",
              "target": "CalendarScreen",
              "description": "Muestra actividades de un día específico"
            },
            {
              "id": "navigate_month",
              "name": "Navegar Meses",
              "target": "CalendarScreen",
              "description": "Cambia el mes visible"
            }
          ]
        }
      },
      "apis": []
    },
    "ProfileScreen": {
      "id": "profile",
      "name": "Perfil",
      "role": "both",
      "description": "Perfil del usuario con estadísticas y configuración",
      "sections": [
        {
          "id": "user_info",
          "name": "Información Personal",
          "description": "Avatar, nombre, email, biométricas"
        },
        {
          "id": "weekly_stats",
          "name": "Estadísticas Semanales",
          "description": "Anillos de actividad, calorías, minutos"
        },
        {
          "id": "injuries",
          "name": "Lesiones",
          "description": "Lista y gestión de lesiones"
        },
        {
          "id": "settings",
          "name": "Configuración",
          "description": "Ajustes de cuenta"
        }
      ],
      "actions": [
        {
          "id": "edit_profile",
          "name": "Editar Perfil",
          "target": "ProfileScreen",
          "description": "Edita información personal"
        },
        {
          "id": "update_biometrics",
          "name": "Actualizar Biométricas",
          "target": "ProfileScreen",
          "description": "Actualiza peso, altura, etc."
        },
        {
          "id": "manage_injuries",
          "name": "Gestionar Lesiones",
          "target": "ProfileScreen",
          "description": "Agrega/elimina lesiones"
        },
        {
          "id": "upload_avatar",
          "name": "Subir Avatar",
          "target": "ProfileScreen",
          "description": "Actualiza foto de perfil"
        }
      ],
      "apis": [
        "GET /api/profile/combined",
        "GET /api/profile/biometrics",
        "GET /api/profile/injuries",
        "PUT /api/profile/injuries",
        "GET /api/profile/exercise-progress"
      ]
    },
    "ClientsScreen": {
      "id": "clients",
      "name": "Mis Clientes",
      "role": "coach",
      "description": "Gestión de clientes del coach",
      "sections": [
        {
          "id": "clients_list",
          "name": "Lista de Clientes",
          "description": "Todos los clientes del coach"
        },
        {
          "id": "client_search",
          "name": "Búsqueda",
          "description": "Buscar clientes por nombre"
        }
      ],
      "actions": [
        {
          "id": "click_client",
          "name": "Click en Cliente",
          "target": "ClientDetailsModal",
          "description": "Abre detalles del cliente"
        },
        {
          "id": "view_client_progress",
          "name": "Ver Progreso",
          "target": "ClientDetailsModal",
          "description": "Ve progreso del cliente en productos"
        }
      ],
      "apis": [
        "GET /api/coach/clients",
        "GET /api/coach/clients/[id]/details"
      ]
    },
    "ProductsManagementScreen": {
      "id": "products-management",
      "name": "Gestión de Productos",
      "role": "coach",
      "description": "Gestión de productos/actividades del coach",
      "sections": [
        {
          "id": "products_list",
          "name": "Mis Productos",
          "description": "Lista de productos creados"
        },
        {
          "id": "consultations",
          "name": "Consultas",
          "description": "Configuración de Meet 30min, Meet 1hr, Café"
        },
        {
          "id": "stats",
          "name": "Estadísticas",
          "description": "Estadísticas de productos"
        }
      ],
      "actions": [
        {
          "id": "create_product",
          "name": "Crear Producto",
          "target": "CreateProductModal",
          "description": "Abre modal para crear producto nuevo"
        },
        {
          "id": "edit_product",
          "name": "Editar Producto",
          "target": "CreateProductModal",
          "description": "Edita producto existente"
        },
        {
          "id": "toggle_consultation",
          "name": "Habilitar/Deshabilitar Consulta",
          "target": "ProductsManagementScreen",
          "description": "Activa/desactiva tipo de consulta"
        },
        {
          "id": "update_consultation_price",
          "name": "Actualizar Precio",
          "target": "ProductsManagementScreen",
          "description": "Actualiza precio de consulta"
        }
      ],
      "apis": [
        "GET /api/products",
        "GET /api/coach/consultations",
        "PUT /api/coach/consultations",
        "GET /api/coach/stats-simple"
      ]
    },
    "TodayScreen": {
      "id": "today",
      "name": "Actividad del Día",
      "role": "cliente",
      "description": "Vista de ejercicios del día para una actividad específica",
      "sections": [
        {
          "id": "exercises_list",
          "name": "Ejercicios del Día",
          "description": "Lista de ejercicios programados"
        },
        {
          "id": "navigation",
          "name": "Navegación de Días",
          "description": "Botones para cambiar de día"
        },
        {
          "id": "progress_indicator",
          "name": "Indicador de Progreso",
          "description": "Muestra progreso del día/semana"
        }
      ],
      "actions": [
        {
          "id": "complete_exercise",
          "name": "Completar Ejercicio",
          "target": "TodayScreen",
          "description": "Marca ejercicio como completado"
        },
        {
          "id": "navigate_day",
          "name": "Navegar Días",
          "target": "TodayScreen",
          "description": "Cambia a día anterior/siguiente"
        },
        {
          "id": "back_to_activity",
          "name": "Volver a Actividades",
          "target": "ActivityScreen",
          "description": "Regresa a lista de actividades"
        }
      ],
      "apis": [
        "GET /api/activities/[id]/first-day",
        "GET /api/activities/today",
        "GET /api/executions/day",
        "GET /api/ejecuciones-ejercicio"
      ]
    },
    "ClientProductModal": {
      "id": "client-product-modal",
      "name": "Modal de Producto (Cliente)",
      "role": "cliente",
      "description": "Vista detallada de un producto/actividad para compra",
      "sections": [
        {
          "id": "product_info",
          "name": "Información del Producto",
          "description": "Título, descripción, coach, precio"
        },
        {
          "id": "product_stats",
          "name": "Estadísticas",
          "description": "Semanas, sesiones, ejercicios"
        },
        {
          "id": "media",
          "name": "Media",
          "description": "Video o imagen del producto"
        },
        {
          "id": "purchase_button",
          "name": "Botón de Compra",
          "description": "Comprar o acceder al producto"
        }
      ],
      "actions": [
        {
          "id": "purchase_product",
          "name": "Comprar Producto",
          "target": "ActivityScreen",
          "description": "Inscribe al cliente en el producto"
        },
        {
          "id": "close_modal",
          "name": "Cerrar Modal",
          "target": "SearchScreen",
          "description": "Vuelve a la pantalla anterior"
        },
        {
          "id": "view_coach_profile",
          "name": "Ver Perfil del Coach",
          "target": "CoachProfileModal",
          "description": "Abre perfil del coach"
        }
      ],
      "apis": [
        "GET /api/activities/[id]/purchase-status",
        "GET /api/get-product-planning"
      ]
    },
    "CreateProductModal": {
      "id": "create-product-modal",
      "name": "Modal Crear/Editar Producto",
      "role": "coach",
      "description": "Formulario completo para crear o editar productos",
      "steps": [
        {
          "id": "step1_general",
          "name": "Paso 1: Información General",
          "fields": ["título", "descripción", "categoría", "tipo", "precio", "capacidad", "imagen/video"]
        },
        {
          "id": "step2_schedule",
          "name": "Paso 2: Horarios (Taller)",
          "fields": ["fechas", "horarios", "duración"],
          "onlyFor": "workshop"
        },
        {
          "id": "step3_topics",
          "name": "Paso 3: Temas (Taller)",
          "fields": ["temas", "descripción de temas"],
          "onlyFor": "workshop"
        },
        {
          "id": "step4_exercises",
          "name": "Paso 4: Ejercicios",
          "fields": ["CSV de ejercicios", "videos de ejercicios"]
        },
        {
          "id": "step5_planning",
          "name": "Paso 5: Planificación Semanal",
          "fields": ["períodos", "sesiones por semana", "ejercicios por sesión"]
        }
      ],
      "actions": [
        {
          "id": "save_product",
          "name": "Guardar Producto",
          "target": "ProductsManagementScreen",
          "description": "Guarda el producto y vuelve a lista"
        },
        {
          "id": "cancel_creation",
          "name": "Cancelar",
          "target": "ProductsManagementScreen",
          "description": "Descarta cambios y cierra modal"
        },
        {
          "id": "next_step",
          "name": "Siguiente Paso",
          "target": "CreateProductModal",
          "description": "Avanza al siguiente paso"
        },
        {
          "id": "previous_step",
          "name": "Paso Anterior",
          "target": "CreateProductModal",
          "description": "Regresa al paso anterior"
        }
      ],
      "apis": [
        "GET /api/get-product-planning",
        "GET /api/activity-exercises/[id]",
        "GET /api/existing-exercises"
      ]
    },
    "ClientDetailsModal": {
      "id": "client-details-modal",
      "name": "Modal de Detalles del Cliente",
      "role": "coach",
      "description": "Vista detallada de un cliente específico",
      "sections": [
        {
          "id": "client_info",
          "name": "Información del Cliente",
          "description": "Nombre, email, avatar, biométricas"
        },
        {
          "id": "enrolled_products",
          "name": "Productos Inscritos",
          "description": "Lista de productos del coach en los que está inscrito"
        },
        {
          "id": "progress",
          "name": "Progreso",
          "description": "Progreso en cada producto"
        }
      ],
      "actions": [
        {
          "id": "close_details",
          "name": "Cerrar Detalles",
          "target": "ClientsScreen",
          "description": "Vuelve a lista de clientes"
        }
      ],
      "apis": [
        "GET /api/coach/clients/[id]/details"
      ]
    }
  },
  "navigationFlows": {
    "cliente": {
      "name": "Flujo de Cliente",
      "mainJourney": [
        {
          "step": 1,
          "from": "Community/Search",
          "action": "Usuario nuevo explora",
          "to": "SearchScreen",
          "description": "Usuario busca coaches o actividades"
        },
        {
          "step": 2,
          "from": "SearchScreen",
          "action": "Click en actividad",
          "to": "ClientProductModal",
          "description": "Ve detalles del producto"
        },
        {
          "step": 3,
          "from": "ClientProductModal",
          "action": "Comprar",
          "to": "ActivityScreen",
          "description": "Se inscribe y ve sus actividades"
        },
        {
          "step": 4,
          "from": "ActivityScreen",
          "action": "Click en actividad",
          "to": "TodayScreen",
          "description": "Accede a ejercicios del día"
        },
        {
          "step": 5,
          "from": "TodayScreen",
          "action": "Completar ejercicios",
          "to": "TodayScreen",
          "description": "Marca ejercicios como completados"
        },
        {
          "step": 6,
          "from": "Any screen",
          "action": "Ver progreso",
          "to": "ProfileScreen",
          "description": "Revisa estadísticas personales"
        }
      ]
    },
    "coach": {
      "name": "Flujo de Coach",
      "mainJourney": [
        {
          "step": 1,
          "from": "Profile",
          "action": "Coach nuevo configura perfil",
          "to": "ProfileScreen",
          "description": "Completa información de perfil"
        },
        {
          "step": 2,
          "from": "ProfileScreen",
          "action": "Navega a Products",
          "to": "ProductsManagementScreen",
          "description": "Accede a gestión de productos"
        },
        {
          "step": 3,
          "from": "ProductsManagementScreen",
          "action": "Crear Producto",
          "to": "CreateProductModal",
          "description": "Abre modal de creación"
        },
        {
          "step": 4,
          "from": "CreateProductModal",
          "action": "Completar pasos 1-5",
          "to": "CreateProductModal",
          "description": "Configura producto completo"
        },
        {
          "step": 5,
          "from": "CreateProductModal",
          "action": "Guardar",
          "to": "ProductsManagementScreen",
          "description": "Producto creado y visible"
        },
        {
          "step": 6,
          "from": "ProductsManagementScreen",
          "action": "Configurar consultas",
          "to": "ProductsManagementScreen",
          "description": "Habilita Meet/Café con precios"
        },
        {
          "step": 7,
          "from": "Any screen",
          "action": "Ver clientes",
          "to": "ClientsScreen",
          "description": "Gestiona clientes inscritos"
        },
        {
          "step": 8,
          "from": "ClientsScreen",
          "action": "Click en cliente",
          "to": "ClientDetailsModal",
          "description": "Ve detalles y progreso"
        },
        {
          "step": 9,
          "from": "Any screen",
          "action": "Ver calendario",
          "to": "CalendarScreen",
          "description": "Revisa actividades programadas"
        }
      ]
    }
  },
  "connections": [
    {
      "from": "SearchScreen",
      "to": "ClientProductModal",
      "action": "Click en actividad",
      "role": "cliente",
      "type": "modal"
    },
    {
      "from": "SearchScreen",
      "to": "CoachProfileModal",
      "action": "Click en coach",
      "role": "cliente",
      "type": "modal"
    },
    {
      "from": "ClientProductModal",
      "to": "ActivityScreen",
      "action": "Comprar/Inscribirse",
      "role": "cliente",
      "type": "navigation"
    },
    {
      "from": "ActivityScreen",
      "to": "TodayScreen",
      "action": "Click en actividad",
      "role": "cliente",
      "type": "navigation"
    },
    {
      "from": "TodayScreen",
      "to": "ActivityScreen",
      "action": "Volver",
      "role": "cliente",
      "type": "navigation"
    },
    {
      "from": "CalendarScreen",
      "to": "ActivityScreen",
      "action": "Click en actividad (cliente)",
      "role": "cliente",
      "type": "navigation"
    },
    {
      "from": "ProductsManagementScreen",
      "to": "CreateProductModal",
      "action": "Crear/Editar Producto",
      "role": "coach",
      "type": "modal"
    },
    {
      "from": "CreateProductModal",
      "to": "ProductsManagementScreen",
      "action": "Guardar/Cancelar",
      "role": "coach",
      "type": "navigation"
    },
    {
      "from": "ClientsScreen",
      "to": "ClientDetailsModal",
      "action": "Click en cliente",
      "role": "coach",
      "type": "modal"
    },
    {
      "from": "ClientDetailsModal",
      "to": "ClientsScreen",
      "action": "Cerrar",
      "role": "coach",
      "type": "navigation"
    }
  ],
  "globalElements": {
    "topBar": {
      "name": "Barra Superior",
      "elements": [
        {
          "id": "settings",
          "name": "Settings Icon",
          "action": "Abre configuración",
          "target": "SettingsScreen"
        },
        {
          "id": "messages",
          "name": "Messages Icon",
          "action": "Abre mensajes",
          "target": "MessagesScreen"
        },
        {
          "id": "logo",
          "name": "OMNIA Logo",
          "action": "Vuelve a Community",
          "target": "CommunityScreen"
        }
      ]
    },
    "bottomNavigation": {
      "name": "Navegación Inferior",
      "alwaysVisible": true,
      "dynamicByRole": true
    }
  },
  "figmaInstructions": {
    "title": "Instrucciones para importar a Figma",
    "steps": [
      "1. Crea un nuevo archivo en Figma",
      "2. Usa el plugin 'JSON to Figma' o 'Autoflow' para importar el flujo",
      "3. Alternativamente, usa este JSON para crear manualmente los frames",
      "4. Colores sugeridos:",
      "   - Cliente: #3B82F6 (azul)",
      "   - Coach: #FF7939 (naranja)",
      "   - Shared: #8B5CF6 (púrpura)",
      "5. Crea frames para cada screen",
      "6. Conecta con flechas usando 'Prototype' mode",
      "7. Agrupa por roles usando frames containers"
    ],
    "recommendedPlugins": [
      "Autoflow - Para crear diagramas de flujo automáticamente",
      "FigJam - Para diagramas colaborativos",
      "Miro for Figma - Para importar a tableros Miro"
    ]
  },
  "visualization": {
    "mermaidDiagram": "Ver archivo UX_FLOW_MERMAID.md para diagrama en formato Mermaid",
    "plantUML": "Ver archivo UX_FLOW_PLANTUML.puml para diagrama PlantUML"
  }
}

